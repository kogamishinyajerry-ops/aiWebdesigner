<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI é˜…è¯»åŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        body {
            font-family: 'Noto Sans SC', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .typing-indicator::after {
            content: '...';
            animation: typing 1.5s infinite;
        }

        @keyframes typing {
            0%, 100% { content: ''; }
            33% { content: '.'; }
            66% { content: '..'; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .keyword-tag {
            display: inline-block;
            padding: 4px 12px;
            margin: 4px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .keyword-tag:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- å¤´éƒ¨ -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">
                ğŸ“– AI é˜…è¯»åŠ©æ‰‹
            </h1>
            <p class="text-white/80 text-lg">
                è®©é•¿æ–‡å˜çŸ­æ–‡ï¼Œå¿«é€Ÿè·å–ä¿¡æ¯
            </p>
        </header>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-2 gap-6">
                <!-- å·¦ä¾§ï¼šè¾“å…¥åŒº -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">ğŸ“</span>
                        è¾“å…¥æ–‡æœ¬
                    </h2>

                    <textarea
                        id="inputText"
                        class="w-full h-64 p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none transition-all"
                        placeholder="ç²˜è´´æˆ–è¾“å…¥ä½ æƒ³è¦é˜…è¯»çš„é•¿æ–‡...&#10;&#10;ä¾‹å¦‚ï¼šç²˜è´´ä¸€ç¯‡æ–‡ç« ã€è®ºæ–‡ã€æŠ¥å‘Šç­‰"
                    ></textarea>

                    <div class="flex items-center justify-between mt-4">
                        <div class="text-sm text-gray-500">
                            <span id="charCount">0</span> å­—
                        </div>
                        <div class="flex gap-2">
                            <button
                                onclick="clearText()"
                                class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
                            >
                                æ¸…ç©º
                            </button>
                            <button
                                onclick="analyzeText()"
                                class="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg shadow-lg hover:shadow-xl transition-all"
                            >
                                âœ¨ å¼€å§‹åˆ†æ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- å³ä¾§ï¼šç»“æœåŒº -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">ğŸ“Š</span>
                        åˆ†æç»“æœ
                    </h2>

                    <div id="results" class="space-y-4">
                        <div class="text-center text-gray-400 py-12">
                            <div class="text-5xl mb-4">ğŸ¤”</div>
                            <p>è¾“å…¥æ–‡æœ¬åç‚¹å‡»"å¼€å§‹åˆ†æ"</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¯¦ç»†ç»“æœå¡ç‰‡ -->
            <div id="detailCards" class="mt-6 space-y-6 hidden">
                <!-- æ‘˜è¦å¡ç‰‡ -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl fade-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-xl mr-2">ğŸ“‹</span>
                        å†…å®¹æ‘˜è¦
                    </h3>
                    <div id="summary" class="text-gray-700 leading-relaxed">
                    </div>
                </div>

                <!-- å…³é”®è§‚ç‚¹å¡ç‰‡ -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl fade-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-xl mr-2">ğŸ’¡</span>
                        å…³é”®è§‚ç‚¹
                    </h3>
                    <ul id="keyPoints" class="space-y-2">
                    </ul>
                </div>

                <!-- å…³é”®è¯å¡ç‰‡ -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl fade-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-xl mr-2">ğŸ”‘</span>
                        å…³é”®è¯
                    </h3>
                    <div id="keywords" class="flex flex-wrap">
                    </div>
                </div>

                <!-- é˜…è¯»æ—¶é—´å¡ç‰‡ -->
                <div class="glass-card rounded-2xl p-6 shadow-2xl fade-in">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <span class="text-xl mr-2">â±ï¸</span>
                        é˜…è¯»ä¿¡æ¯
                    </h3>
                    <div class="flex items-center gap-6 text-gray-700">
                        <div class="flex items-center">
                            <span class="text-2xl mr-2">â°</span>
                            <span class="text-lg font-medium">é¢„è®¡é˜…è¯»æ—¶é—´ï¼š<span id="readingTime" class="font-bold text-purple-600">0</span> åˆ†é’Ÿ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é¡µè„š -->
        <footer class="text-center mt-8 text-white/60 text-sm">
            <p>ğŸš€ AI é˜…è¯»åŠ©æ‰‹ - è®©é˜…è¯»æ›´é«˜æ•ˆ</p>
        </footer>
    </div>

    <script>
        const API_URL = 'http://localhost:8000';

        // æ›´æ–°å­—ç¬¦è®¡æ•°
        document.getElementById('inputText').addEventListener('input', function() {
            const count = this.value.length;
            document.getElementById('charCount').textContent = count;
        });

        // æ¸…ç©ºæ–‡æœ¬
        function clearText() {
            document.getElementById('inputText').value = '';
            document.getElementById('charCount').textContent = '0';
            document.getElementById('results').innerHTML = `
                <div class="text-center text-gray-400 py-12">
                    <div class="text-5xl mb-4">ğŸ¤”</div>
                    <p>è¾“å…¥æ–‡æœ¬åç‚¹å‡»"å¼€å§‹åˆ†æ"</p>
                </div>
            `;
            document.getElementById('detailCards').classList.add('hidden');
        }

        // åˆ†ææ–‡æœ¬
        async function analyzeText() {
            const text = document.getElementById('inputText').value.trim();

            if (!text) {
                alert('è¯·è¾“å…¥æ–‡æœ¬åå†åˆ†æ');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            document.getElementById('results').innerHTML = `
                <div class="text-center py-12">
                    <div class="text-5xl mb-4 animate-bounce">ğŸ¤–</div>
                    <p class="text-gray-600">AI æ­£åœ¨åˆ†æä¸­<span class="typing-indicator"></span></p>
                </div>
            `;

            try {
                const response = await fetch(`${API_URL}/api/v1/summary`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        language: 'zh'
                    })
                });

                if (!response.ok) {
                    throw new Error('åˆ†æå¤±è´¥');
                }

                const data = await response.json();
                displayResults(data);
            } catch (error) {
                document.getElementById('results').innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-5xl mb-4">âŒ</div>
                        <p class="text-red-500">åˆ†æå¤±è´¥ï¼Œè¯·ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨</p>
                    </div>
                `;
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResults(data) {
            // æ›´æ–°å³ä¾§ç»“æœåŒº
            document.getElementById('results').innerHTML = `
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                        <span class="font-medium text-gray-700">ğŸ“‹ å†…å®¹æ‘˜è¦</span>
                        <span class="text-sm text-purple-600">${data.summary.substring(0, 50)}...</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-pink-50 rounded-lg">
                        <span class="font-medium text-gray-700">ğŸ’¡ å…³é”®è§‚ç‚¹</span>
                        <span class="text-sm text-pink-600">${data.key_points.length} æ¡</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                        <span class="font-medium text-gray-700">ğŸ”‘ å…³é”®è¯</span>
                        <span class="text-sm text-blue-600">${data.keywords.length} ä¸ª</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                        <span class="font-medium text-gray-700">â±ï¸ é˜…è¯»æ—¶é—´</span>
                        <span class="text-sm text-green-600">${data.reading_time} åˆ†é’Ÿ</span>
                    </div>
                </div>
            `;

            // æ˜¾ç¤ºè¯¦ç»†å¡ç‰‡
            document.getElementById('detailCards').classList.remove('hidden');
            document.getElementById('summary').textContent = data.summary;
            document.getElementById('readingTime').textContent = data.reading_time;

            // å…³é”®è§‚ç‚¹
            const keyPointsList = document.getElementById('keyPoints');
            keyPointsList.innerHTML = data.key_points.map(point =>
                `<li class="flex items-start">
                    <span class="text-pink-500 mr-2">â€¢</span>
                    <span class="text-gray-700">${point}</span>
                </li>`
            ).join('');

            // å…³é”®è¯
            const keywordsDiv = document.getElementById('keywords');
            const colors = ['bg-purple-100 text-purple-700', 'bg-pink-100 text-pink-700', 'bg-blue-100 text-blue-700', 'bg-green-100 text-green-700', 'bg-yellow-100 text-yellow-700'];
            keywordsDiv.innerHTML = data.keywords.map((keyword, i) =>
                `<span class="keyword-tag ${colors[i % colors.length]}">${keyword}</span>`
            ).join('');
        }
    </script>
</body>
</html>
